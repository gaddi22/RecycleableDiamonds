#smithing diamond armor into diamond fragments
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard

execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard

execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword",Count:1b}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard

#smithing diamond fragments into diamonds
execute as @e[type=item,nbt={Item:{id:"minecraft:emerald",Count:9b,tag:{display:{Name:'{"text":"Diamond Shard","color":"aqua"}'},CustomModelData:dshrd}}}] at @s if block ~ ~.5 ~ quartz_slab run execute as @s at @s if block ~ ~2.5 ~ sticky_piston[facing=down,extended=true] run function smith:diamond