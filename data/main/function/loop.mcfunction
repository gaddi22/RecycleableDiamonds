#smithing diamond armor into diamond fragments
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet"}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate"}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots"}}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:anvil"}}, distance=..1] run function smith:shard

execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:chipped_anvil"}}, distance=..1] run function smith:shard

execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_helmet" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_chestplate" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_boots" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_leggings" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_axe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_hoe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_horse_armor" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_pickaxe" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_shovel" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard
execute as @e[type=minecraft:item, nbt={Item:{id:"minecraft:diamond_sword" }}] at @s run execute if block ~ ~-1 ~ minecraft:smithing_table run execute as @s if entity @e[type=falling_block,nbt={BlockState:{Name:"minecraft:damaged_anvil"}}, distance=..1] run function smith:shard

#smithing diamond fragments into diamonds
execute as @e[type=minecraft:item,name="Diamond Shard"] if items entity @s container.0 *[minecraft:custom_model_data=1,minecraft:count=9] at @s if block ~ ~.5 ~ quartz_slab run execute as @s at @s if block ~ ~2.5 ~ sticky_piston[facing=down,extended=true] run function smith:diamond